#! /usr/unsupported/bin/perl
# -*- mode: cperl -*-
# -------------------------------------------------------------
# file: mkgrid.pl
# -------------------------------------------------------------
# -------------------------------------------------------------
# Battelle Memorial Institute
# Pacific Northwest Laboratory
# -------------------------------------------------------------
# -------------------------------------------------------------
# Created October 15, 2003 by William A. Perkins
# Last Change: Thu Jan  5 20:13:06 2006 by William A. Perkins <perk@mcperktop.local>
# -------------------------------------------------------------

# RCS ID: $Id$

use strict;

# -------------------------------------------------------------
#  variable initialization
# -------------------------------------------------------------
my $program;
($program = $0) =~ s/.*\///;
my $usage = "usage: $program";


my $L = 5000.0;
my $B = 10.0;
my $SS = 0.5;
my $D = 2.0;
my $W = $B + 2*$D/$SS;
my $Z0 = 15.0;
my $dx = 25.0;
my $dy = 0.25;

my $pi = atan2(1.0,1.0)*4.0;
my $g = 9.81;

my $manning = 0.030;

# -------------------------------------------------------------
# main program
# -------------------------------------------------------------

my $dhat;
my $d;
my $z = $Z0;
my $i;
my $j;

my $x;
my $y;
my $So;

$i = 1;
for ($x = 0.0; $x <= $L; $x += $dx, $i += 1) {
  $d = 9.0/8.0 + 0.250*sin($pi*$x/500);
  $dhat = $pi/2000.0*cos($pi*$x/500);
  $So = (1 - (400*(10+4*$d))/($g*(10+2*$d)**3.0*$d**3.0))*$dhat +
    0.36*((10+2*$d*sqrt(5.0))**(4/3))/((10+2*$d)**(10/3)*$d**(10/3));
  if ($x > 0.0) {
    $z -= $So*$dx;
  } else {
    $z = $Z0;
  }
  printf("%5d %5d %12.8e %10d %12.8e %10.4f 1000  0.001\n", 
            1, $i, ($L-$x)*0.00062137119, 100, $z/0.3048, $manning);

}
